let t;function e(t){return t&&t.__esModule?t.default:t}function i(t,e,i,s){Object.defineProperty(t,e,{get:i,set:s,enumerable:!0,configurable:!0})}var s=globalThis,r={},o={},h=s.parcelRequirebf15;null==h&&((h=function(t){if(t in r)return r[t].exports;if(t in o){var e=o[t];delete o[t];var i={id:t,exports:{}};return r[t]=i,e.call(i.exports,i,i.exports),i.exports}var s=Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){o[t]=e},s.parcelRequirebf15=h);var a=h.register;a("hMArn",function(t,s){i(t.exports,"default",()=>o);var r=h("7Pz0b"),o=class{constructor(t,e){let i={pos:t.createVector(0,0),mass:1,velocity:t.createVector(0,0),acceleration:t.createVector(0,0),maxSpeed:15,maxForce:.25,wanderTheta:0,breakingThreshold:100,r:20,material:t.color("#00ffff"),...e};this.p5=t,this.pos=i.pos,this.mass=i.mass,this.velocity=i.velocity,this.acceleration=i.acceleration,this.maxSpeed=i.maxSpeed,this.maxForce=i.maxForce,this.wanderTheta=i.wanderTheta,this.breakingThreshold=i.breakingThreshold,this.r=i.r,this.material=i.material,this.wanderTheta=0}setValues(t,e){switch(t){case"maxSpeed":this.maxSpeed=e;break;case"maxForce":this.maxForce=e;break;default:throw"Unsupported key passed to setValues()"}}draw(t=!1){return this.p5.push(),this.p5.translate(this.pos.x,this.pos.y),t&&this.drawHelpers(),this.p5.rotate(this.velocity.heading()),this.drawSprite(),this.p5.pop(),this}update(){return this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed),this.pos.add(this.velocity),this.acceleration.set(0,0),this}applyForces(t){return t&&this.acceleration.add(t),this}drawSprite(){let t=this.r;return this.p5.stroke(this.material),this.p5.strokeWeight(1),this.p5.noFill(),this.p5.triangle(t,0,-t,t/2,-t,-t/2),this}drawHelpers(){this.p5.stroke(0,80,50);let t=this.velocity.copy();return t.setMag(20*t.mag()),this.p5.line(0,0,t.x,t.y),this}seek(t,i=!1){if(!t)return null;let s=e(r).Vector.sub(t,this.pos),o=this.maxSpeed;if(i){let t=s.mag();t<this.breakingThreshold&&(o=this.p5.map(t,0,this.breakingThreshold,0,this.maxSpeed))}return s.setMag(o),s.sub(this.velocity),s.limit(this.maxForce),s}flee(t){return null===t?null:this.seek(t).mult(-1)}pursue(t){let e=t.pos.copy(),i=t.velocity.copy();return i.mult(40),e.add(i),this.seek(e)}evade(t){let e=this.pursue(t);return e.mult(-1),e}arrive(t){return this.seek(t,!0)}wander(){let t=this.p5.PI/6,e=50*this.p5.cos(this.wanderTheta),i=50*this.p5.sin(this.wanderTheta),s=this.velocity.copy().setMag(100);return s.add(this.p5.createVector(e,i)),s.add(this.pos),this.constraintWithinWindow(this.pos.x,this.pos.y),this.wanderTheta+=this.p5.random(-t,t),this.seek(s)}pathFollow(t){let e=this.velocity.copy().normalize().mult(50).add(this.pos);this.p5.strokeWeight(1),this.p5.stroke(255),this.p5.circle(e.x,e.y,5);let i=t.getClosestSegment(e.x,e.y);return i.length&&i.length>t.radius&&i.intersectionPosition?this.seek(i.intersectionPosition):this.velocity.copy()}constraintWithinWindow(t,e){let{innerWidth:i,innerHeight:s}=window;t<0&&(this.pos.x=i),t>i&&(this.pos.x=0),e<0&&(this.pos.y=s),e>s&&(this.pos.y=0)}}}),a("7wO5S",function(t,s){i(t.exports,"default",()=>a);var r=h("7Pz0b");let o={radius:2,color:100,isClosed:!1};var a=class{constructor(t,e){let i={...o,...e};this.p5=t,this.mode="view",this.points=[],this.paintRef=this.paint.bind(this),this.radius=i.radius,this.color=i.color,this.isClosed=i.isClosed}setPoints(t){return this.points=t,this.stopPainting()}getPoints(){return this.points}getClosestSegment(t,i){let s,o;let h=this.p5.createVector(t,i),a=this.getPoints(),n=a.length;this.p5.angleMode(this.p5.RADIANS),this.p5.colorMode(this.p5.HSB);for(let t=0;t<n;t++){let i=a[t].length,n=0;for(let l=1;!this.isClosed&&l<i||this.isClosed&&l<=i;l++){let p=l%i,d=e(r).Vector.sub(a[t][p],a[t][n]),c=e(r).Vector.sub(h,a[t][n]).dot(d),u=d.copy().normalize().setMag(this.p5.constrain(c/d.magSq(),0,1)*d.mag()).copy().add(a[t][n]),m=u.copy().sub(h).magSq();(void 0===o||m<o)&&(o=m,s=u),n=p}}return{length:o,intersectionPosition:s}}addPoint(t){let e=this.points.length;return this.points[e].push(t.copy()),this}deletePoint(){let t=this.points.length;return this.points[t].pop(),this}startPainting(){return"draw"===this.mode||(this.mode="draw",this.points.push([]),this.p5.canvas.addEventListener("click",this.paintRef)),this}stopPainting(){return"view"===this.mode||(this.mode="view",this.p5.canvas.removeEventListener("click",this.paintRef)),this}togglePainting(){return"view"===this.mode?this.startPainting():this.stopPainting(),this}paint(t){let e=this.p5.createVector(t.x,t.y),i=this.points.length;return this.points[i-1].push(e),this}update(t){return this}draw(){let t=this.points.length;this.p5.stroke(this.color),this.p5.strokeWeight(2*this.radius);for(let e=0;e<t;e++){let i=this.points[e].length;this.p5.noFill(),this.p5.beginShape();for(let t=0;t<i;t++)this.p5.circle(this.points[e][t].x,this.points[e][t].y,10),this.p5.vertex(this.points[e][t].x,this.points[e][t].y);let s=this.isClosed&&"draw"==this.mode&&t>1&&e!==t-1||this.isClosed&&"view"==this.mode;this.p5.endShape(s?"close":void 0),e==t-1&&i>0&&"draw"==this.mode&&this.p5.line(this.points[e][i-1].x,this.points[e][i-1].y,this.p5.mouseX,this.p5.mouseY)}return this}}});var n=h("e93rA"),l=h("7Pz0b"),p=h("hMArn"),d=h("7wO5S");let c=[];new(e(l))(e=>{let i={maxSpeed:3.5,maxForce:.2},s=new n.GUI({autoPlace:!1});s.domElement.id="gui",document.getElementById("gui")?.appendChild(s.domElement),s.add(i,"maxSpeed",.1,10,.1).onChange(t=>c.forEach((e,i)=>{0===i&&e.setValues("maxSpeed",t)})),s.add(i,"maxForce",.01,2,.01).onChange(t=>c.forEach((e,i)=>{0===i&&e.setValues("maxForce",t)})),e.setup=()=>{e.createCanvas(window.innerWidth,window.innerHeight).parent("app"),e.background("white"),e.pixelDensity(1),e.colorMode(e.HSB),window.addEventListener("resize",()=>(function(t){t.resizeCanvas(window.innerWidth,window.innerHeight)})(e)),function(e){e.background(200,60,10),t=new d.default(e,{isClosed:!0,color:20,radius:10});let s=[[e.createVector(150,300),e.createVector(250,150),e.createVector(550,250),e.createVector(730,150),e.createVector(850,300),e.createVector(800,500),e.createVector(400,600)]];t.setPoints(s),(c=[]).push(new p.default(e,{pos:e.createVector(200,100),maxSpeed:i.maxSpeed,maxForce:i.maxForce}))}(e)},e.draw=()=>{e.background(200,60,10),t.update(e.deltaTime).draw(),function(t){for(let e=0;e<c.length;e++){let i=c[e].pathFollow(t);c[e].applyForces(i).update().draw()}}(t)}});
//# sourceMappingURL=steering-behaviours-path-follow.5b7b3ab1.js.map
