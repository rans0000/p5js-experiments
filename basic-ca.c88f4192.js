let e;function t(e,t,i,s){Object.defineProperty(e,t,{get:i,set:s,enumerable:!0,configurable:!0})}var i=globalThis,s={},l={},r=i.parcelRequirebf15;null==r&&((r=function(e){if(e in s)return s[e].exports;if(e in l){var t=l[e];delete l[e];var i={id:e,exports:{}};return s[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){l[e]=t},i.parcelRequirebf15=r),(0,r.register)("fK5g3",function(e,i){var s,l,r,a;t(e.exports,"defaultEntityConfig",()=>o),t(e.exports,"defaultEdgeConfig",()=>h),t(e.exports,"MOUSE_BTN",()=>s),t(e.exports,"Gamer",()=>l);let o={r:5},h={top:!0,right:!0,bottom:!0,left:!0};(r=s||(s={}))[r.LEFT=0]="LEFT",r[r.MIDDLE=1]="MIDDLE",r[r.RIGHT=2]="RIGHT",(a=l||(l={}))[a.PLAYER=0]="PLAYER",a[a.AI=1]="AI"});var a=r("e93rA"),o=r("7Pz0b");class h{constructor(e,t){this.p5=e,this.index=t.index,h.maxHealth=t.maxHealth,this.pos=t.pos,this.size=t.size,this.prevState=t.prevState}setHealth(e=h.maxHealth){this.health=e}cacheState(e){this.prevState=e}update(e){return this.health=this.prevState,this}draw(){return this.p5.rectMode(this.p5.CENTER),this.p5.push(),this.p5.translate(this.pos.x,this.pos.y),this.p5.stroke(255,.1),this.p5.fill(255,this.health?1:0),this.p5.rect(0,0,this.size),this.p5.pop(),this}}var n=class{constructor(e,t){this.tiles=[];let i={horizontalTiles:10,verticalTiles:10,size:50,rule:"4/5/1/1",noiseScale:0,...t};this.p5=e,this.horizontalTiles=i.horizontalTiles,this.verticalTiles=i.verticalTiles,this.size=i.size,this.rule=i.rule,this.tiles=[];let s=this.rule.split("/").map(e=>parseInt(e,10));for(let t=0;t<this.horizontalTiles*this.verticalTiles;t++){this.tiles.push([]);for(let l=0;l<this.verticalTiles;l++)this.tiles[t].push(new h(e,{index:l*this.horizontalTiles+t,maxHealth:s[2],prevState:i.noiseScale&&Math.floor(2*e.noise(t*i.noiseScale,l*i.noiseScale)),pos:e.createVector(t*this.size+this.size/2,l*this.size+this.size/2),size:this.size}))}}updateTile(e,t,i=h.maxHealth){this.tiles[e][t].cacheState(i)}calculateState(){let[e,t,i,s]=this.rule.split("/").map(e=>parseInt(e,10));for(let s=0;s<this.horizontalTiles;s++)for(let l=0;l<this.verticalTiles;l++){let r=0;for(let e=-1;e<2;e++)for(let t=-1;t<2;t++){let i=s+e,a=l+t;(0!=e||0!=t)&&!(i<0)&&!(i>=this.horizontalTiles)&&!(a<0)&&!(a>=this.verticalTiles)&&this.tiles[i][a].health&&++r}r===e?this.tiles[s][l].cacheState(i):(r>=t||8===r)&&this.tiles[s][l].cacheState(0)}}update(e){for(let t=0;t<this.horizontalTiles;t++)for(let i=0;i<this.verticalTiles;i++)this.tiles[t][i].update(e);return this}draw(){for(let e=0;e<this.horizontalTiles;e++)for(let t=0;t<this.verticalTiles;t++)this.tiles[e][t].draw();return this}},c=r("fK5g3");let p=!1;new(o&&o.__esModule?o.default:o)(t=>{let i=new a.GUI({autoPlace:!1});i.domElement.id="gui",document.getElementById("gui")?.appendChild(i.domElement),t.setup=()=>{t.createCanvas(window.innerWidth,window.innerHeight).parent("app"),t.background("white"),t.pixelDensity(1),t.colorMode(t.HSB),window.addEventListener("resize",()=>(function(e){e.resizeCanvas(window.innerWidth,window.innerHeight)})(t)),function(t){t.background(200,60,10);let{innerWidth:i,innerHeight:s}=window;e=new n(t,{horizontalTiles:Math.floor(i/20),verticalTiles:Math.floor(s/20),noiseScale:.5,size:20})}(t)},t.draw=()=>{t.background(200,60,10),e.update(t.deltaTime).draw(),p||e.calculateState()},t.mousePressed=i=>{if(i.button===c.MOUSE_BTN.LEFT){p=!0,t.loop();let{clientX:s,clientY:l}=i;if(s>e.horizontalTiles*e.size&&l>e.verticalTiles)return;let r=Math.floor(s/e.size),a=Math.floor(l/e.size);e.updateTile(r,a)}},t.mouseDragged=t=>{if(!p)return;let{clientX:i,clientY:s}=t;if(i>e.horizontalTiles*e.size&&s>e.verticalTiles)return;let l=Math.floor(i/e.size),r=Math.floor(s/e.size);e.updateTile(l,r)},t.mouseReleased=i=>{i.button===c.MOUSE_BTN.LEFT&&(p=!1,e.calculateState(),t.loop())}});
//# sourceMappingURL=basic-ca.c88f4192.js.map
