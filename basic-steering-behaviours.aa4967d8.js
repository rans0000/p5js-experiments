function e(e){return e&&e.__esModule?e.default:e}function t(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}var i=globalThis,r={},s={},a=i.parcelRequirebf15;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in s){var t=s[e];delete s[e];var i={id:e,exports:{}};return r[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){s[e]=t},i.parcelRequirebf15=a);var o=a.register;o("hMArn",function(i,r){t(i.exports,"default",()=>n);var s=a("7Pz0b");let o=-1;var n=class{constructor(e,t){let i={pos:e.createVector(0,0),mass:1,velocity:e.createVector(0,0),acceleration:e.createVector(0,0),maxSpeed:15,maxForce:.25,wanderTheta:0,breakingThreshold:100,r:20,material:e.color("#00ffff"),perceptionRadius:10,wrapOnScreenEdge:!1,...t};this.id=++o,this.p5=e,this.pos=i.pos,this.mass=i.mass,this.velocity=i.velocity,this.acceleration=i.acceleration,this.maxSpeed=i.maxSpeed,this.maxForce=i.maxForce,this.wanderTheta=i.wanderTheta,this.breakingThreshold=i.breakingThreshold,this.r=i.r,this.material=i.material,this.perceptionRadius=i.perceptionRadius,this.wrapOnScreenEdge=i.wrapOnScreenEdge,this.wanderTheta=0}setValues(e,t){switch(e){case"maxSpeed":this.maxSpeed=t;break;case"maxForce":this.maxForce=t;break;case"perceptionRadius":this.perceptionRadius=t;break;default:throw"Unsupported key passed to setValues()"}}wrapScreen(){let{innerWidth:e,innerHeight:t}=window;this.pos.x<0?this.pos.x=e:this.pos.x>e&&(this.pos.x=0),this.pos.y<0?this.pos.y=t:this.pos.y>t&&(this.pos.y=0)}draw(e=!1){return this.p5.push(),this.p5.translate(this.pos.x,this.pos.y),e&&this.drawHelpers(),this.p5.rotate(this.velocity.heading()),this.drawSprite(),this.p5.pop(),this}update(){return this.velocity.add(this.acceleration.limit(this.maxForce)),this.velocity.limit(this.maxSpeed),this.pos.add(this.velocity),this.wrapOnScreenEdge&&this.wrapScreen(),this.acceleration.set(0,0),this}applyForces(e){return e&&this.acceleration.add(e),this}drawSprite(){let e=this.r;return this.p5.stroke(this.material),this.p5.strokeWeight(1),this.p5.noFill(),this.p5.triangle(e,0,-e,e/2,-e,-e/2),this.p5.stroke(50),this}drawHelpers(){this.p5.noStroke(),this.p5.fill(255),this.p5.textSize(15),this.p5.text(this.id,0,0),this.p5.noFill(),this.velocity.mag()<this.maxSpeed?this.p5.stroke(0,80,50):this.p5.stroke(50),this.p5.strokeWeight(1),this.p5.circle(0,0,this.perceptionRadius);let e=this.velocity.copy().mult(20);return this.p5.line(0,0,e.x,e.y),this}seek(t,i=!1){if(!t)return this.p5.createVector();let r=e(s).Vector.sub(t,this.pos),a=this.maxSpeed;if(i){let e=r.mag();e<this.breakingThreshold&&(a=this.p5.map(e,0,this.breakingThreshold,0,this.maxSpeed))}return r.setMag(a),r.sub(this.velocity),r.limit(this.maxForce),r}flee(e){return null===e?null:this.seek(e).mult(-1)}pursue(e){let t=e.pos.copy(),i=e.velocity.copy();return i.mult(40),t.add(i),this.seek(t)}evade(e){let t=this.pursue(e);return t.mult(-1),t}arrive(e){return this.seek(e,!0)}wander(){let e=this.p5.PI/6,t=50*this.p5.cos(this.wanderTheta),i=50*this.p5.sin(this.wanderTheta),r=this.velocity.copy().setMag(100);return r.add(this.p5.createVector(t,i)),r.add(this.pos),this.constraintWithinWindow(this.pos.x,this.pos.y),this.wanderTheta+=this.p5.random(-e,e),this.seek(r)}pathFollow(e){let t=this.velocity.copy().normalize().mult(50).add(this.pos);this.p5.strokeWeight(1),this.p5.stroke(255),this.p5.circle(t.x,t.y,5);let i=e.getClosestSegment(t.x,t.y);return i.length&&i.length>e.radius&&i.intersectionPosition?this.seek(i.intersectionPosition):this.velocity.copy()}groupBehaviour(t){let i=this.p5.createVector(),r=this.p5.createVector(),a=this.p5.createVector(),o=t.length;for(let n=0;n<o;n++){if(t[n]===this||e(s).Vector.dist(t[n].pos,this.pos)>this.perceptionRadius)continue;i.add(t[n].velocity),r.add(t[n].pos);let h=this.pos.copy().sub(t[n].pos);a.add(h),this.p5.stroke(20),this.p5.strokeWeight(2),o-1>0&&(i.div(o-1).sub(this.velocity).setMag(this.maxSpeed),r.div(o-1).sub(this.pos).setMag(this.maxSpeed),a.div(o-1).sub(this.velocity).setMag(this.maxSpeed))}return{alignment:i,cohesion:r,separation:a}}constraintWithinWindow(e,t){let{innerWidth:i,innerHeight:r}=window;e<0&&(this.pos.x=i),e>i&&(this.pos.x=0),t<0&&(this.pos.y=r),t>r&&(this.pos.y=0)}}}),o("fK5g3",function(e,i){var r,s;t(e.exports,"defaultEntityConfig",()=>a),t(e.exports,"defaultEdgeConfig",()=>o),t(e.exports,"MOUSE_BTN",()=>r);let a={r:5},o={top:!0,right:!0,bottom:!0,left:!0};(s=r||(r={}))[s.LEFT=0]="LEFT",s[s.MIDDLE=1]="MIDDLE",s[s.RIGHT=2]="RIGHT"});var n=a("e93rA"),h=a("7Pz0b"),c=a("hMArn"),p=a("fK5g3");let d=[],l=null;new(e(h))(e=>{let t={showHelpers:!1,maxSpeed:4,maxForce:.1,mode:"Wander"},i=new n.GUI({autoPlace:!1});function r(e){switch(e.background(200,60,10),l=e.createVector(window.innerWidth/2,window.innerHeight/2),t.mode){case"Seek":s(e);break;case"Flee":d=[],s(e),l=l||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Pursuit":d=[new c.default(e,{pos:e.createVector(window.innerWidth,window.innerHeight),maxSpeed:t.maxSpeed,maxForce:t.maxForce}),new c.default(e,{pos:e.createVector(200,300),maxSpeed:4,maxForce:.3,material:e.color("#0000ff")})],l=l||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Evade":d=[new c.default(e,{pos:e.createVector(300,300),maxSpeed:t.maxSpeed,maxForce:t.maxForce}),new c.default(e,{pos:e.createVector(400,300),maxSpeed:2,maxForce:.1,material:e.color("#0000ff")})],l=l||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Arrive":d=[new c.default(e,{pos:e.createVector(300,300),maxSpeed:t.maxSpeed,maxForce:t.maxForce})],l=l||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Wander":d=[new c.default(e,{pos:e.createVector(window.innerWidth/2,window.innerHeight/2),maxSpeed:t.maxSpeed,maxForce:t.maxForce})],l=null}}function s(e){(d=[]).push(new c.default(e,{pos:e.createVector(200,300),maxSpeed:t.maxSpeed,maxForce:t.maxForce})),l=l||e.createVector(window.innerWidth/2,window.innerHeight/2)}i.domElement.id="gui",document.getElementById("gui")?.appendChild(i.domElement),i.add(t,"mode",["Seek","Flee","Pursuit","Evade","Arrive","Wander"]).name("Example Type").onChange(t=>{r(e)}),i.add(t,"showHelpers"),i.add(t,"maxSpeed",.1,10,.1).onChange(e=>d.forEach((t,i)=>{0===i&&t.setValues("maxSpeed",e)})),i.add(t,"maxForce",.01,2,.01).onChange(e=>d.forEach((t,i)=>{0===i&&t.setValues("maxForce",e)})),e.setup=()=>{e.createCanvas(window.innerWidth,window.innerHeight).parent("app"),e.background("white"),e.pixelDensity(1),e.colorMode(e.HSB),window.addEventListener("resize",()=>(function(e){e.resizeCanvas(window.innerWidth,window.innerHeight)})(e)),r(e)},e.draw=()=>{var i;switch(e.background(200,60,10),(i=l)&&(e.push(),e.translate(i.x,i.y),e.noFill(),e.stroke(0,100,70),e.circle(0,0,5),e.rotate(e.PI/4),e.rectMode(e.CENTER),e.rect(0,0,10),e.pop()),t.mode){case"Seek":(function(){for(let e=0;e<d.length;e++){let i=d[e].seek(l);d[e].applyForces(i),d[e].update(),d[e].draw(t.showHelpers)}})();break;case"Flee":(function(){for(let e=0;e<d.length;e++){let i=d[e].flee(l);d[e].applyForces(i),d[e].update(),d[e].draw(t.showHelpers)}})();break;case"Pursuit":(function(){let e=d[0],i=d[1],r=i.seek(l);i.applyForces(r);let s=e.pursue(i);e.applyForces(s);for(let e=0;e<d.length;e++)d[e].update(),d[e].draw(t.showHelpers)})();break;case"Evade":(function(){let e=d[0],i=d[1],r=e.seek(l);e.applyForces(r);let s=i.evade(e);i.applyForces(s);for(let e=0;e<d.length;e++)d[e].update(),d[e].draw(t.showHelpers)})();break;case"Arrive":(function(){let e=d[0],i=e.arrive(l);e.applyForces(i);for(let e=0;e<d.length;e++)d[e].update(),d[e].draw(t.showHelpers)})();break;case"Wander":(function(){let e=d[0],i=e.wander();e.applyForces(i);for(let e=0;e<d.length;e++)d[e].update(),d[e].draw(t.showHelpers)})()}},e.mouseClicked=i=>{if(i.button!==p.MOUSE_BTN.LEFT)return!1;switch(t.mode){case"Seek":case"Flee":case"Pursuit":case"Evade":case"Arrive":l=e.createVector(i.clientX,i.clientY);break;case"Wander":l=null}return!1}});
//# sourceMappingURL=basic-steering-behaviours.aa4967d8.js.map
