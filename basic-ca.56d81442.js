let e;function t(e,t,i,s){Object.defineProperty(e,t,{get:i,set:s,enumerable:!0,configurable:!0})}var i=globalThis,s={},l={},a=i.parcelRequire326b;null==a&&((a=function(e){if(e in s)return s[e].exports;if(e in l){var t=l[e];delete l[e];var i={id:e,exports:{}};return s[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){l[e]=t},i.parcelRequire326b=a),(0,a.register)("fK5g3",function(e,i){var s,l,a,r;t(e.exports,"defaultEntityConfig",()=>h),t(e.exports,"defaultEdgeConfig",()=>o),t(e.exports,"MOUSE_BTN",()=>s),t(e.exports,"Gamer",()=>l);let h={r:5},o={top:!0,right:!0,bottom:!0,left:!0};(a=s||(s={}))[a.LEFT=0]="LEFT",a[a.MIDDLE=1]="MIDDLE",a[a.RIGHT=2]="RIGHT",(r=l||(l={}))[r.PLAYER=0]="PLAYER",r[r.AI=1]="AI"});var r=a("e93rA"),h=a("7Pz0b");class o{constructor(e,t){this.p5=e,this.index=t.index,o.maxHealth=t.maxHealth,this.pos=t.pos,this.size=t.size,this.prevState=t.prevState}setHealth(e=o.maxHealth){this.health=e}cacheState(e){this.prevState=e}update(e){return this.health=this.prevState,this}draw(){return this.p5.rectMode(this.p5.CENTER),this.p5.push(),this.p5.translate(this.pos.x,this.pos.y),this.p5.stroke(255,.1),this.p5.fill(255,this.health?1:0),this.p5.rect(0,0,this.size),this.p5.pop(),this}}var n=class{constructor(e,t){this.tiles=[];let i={horizontalTiles:10,verticalTiles:10,size:50,noiseScale:0,survivalThresold:4,deathThreshold:5,maxHealth:1,...t};this.p5=e,this.horizontalTiles=i.horizontalTiles,this.verticalTiles=i.verticalTiles,this.size=i.size,this.survivalThresold=i.survivalThresold,this.deathThreshold=i.deathThreshold,this.maxHealth=i.maxHealth,this.tiles=[];for(let t=0;t<this.horizontalTiles*this.verticalTiles;t++){this.tiles.push([]);for(let s=0;s<this.verticalTiles;s++)this.tiles[t].push(new o(e,{index:s*this.horizontalTiles+t,maxHealth:this.maxHealth,prevState:i.noiseScale&&Math.floor(2*e.noise(t*i.noiseScale,s*i.noiseScale)),pos:e.createVector(t*this.size+this.size/2,s*this.size+this.size/2),size:this.size}))}}updateTile(e,t,i=o.maxHealth){this.tiles[e][t].cacheState(i)}calculateState(){for(let e=0;e<this.horizontalTiles;e++)for(let t=0;t<this.verticalTiles;t++){let i=0;for(let s=-1;s<2;s++)for(let l=-1;l<2;l++){let a=e+s,r=t+l;(0!=s||0!=l)&&!(a<0)&&!(a>=this.horizontalTiles)&&!(r<0)&&!(r>=this.verticalTiles)&&this.tiles[a][r].health&&++i}i===this.survivalThresold?this.tiles[e][t].cacheState(this.maxHealth):i>=this.deathThreshold&&this.tiles[e][t].cacheState(0)}}update(e){for(let t=0;t<this.horizontalTiles;t++)for(let i=0;i<this.verticalTiles;i++)this.tiles[t][i].update(e);return this}draw(){for(let e=0;e<this.horizontalTiles;e++)for(let t=0;t<this.verticalTiles;t++)this.tiles[e][t].draw();return this}},d=a("fK5g3");let c=!1;new(h&&h.__esModule?h.default:h)(t=>{let i={survivalThresold:4,deathThreshold:5,maxHealth:1,restart:a},s=new r.GUI({autoPlace:!1});function l(t){t.background(200,60,10);let{innerWidth:s,innerHeight:l}=window;e=new n(t,{horizontalTiles:Math.floor(s/20),verticalTiles:Math.floor(l/20),noiseScale:.5,survivalThresold:i.survivalThresold,deathThreshold:i.deathThreshold,maxHealth:i.maxHealth,size:20})}function a(){l(t)}s.domElement.id="gui",document.getElementById("gui")?.appendChild(s.domElement),s.add(i,"restart").name("Restart").onChange(a),s.add(i,"survivalThresold",0,8,1).name("Survival Thresold").onChange(a),s.add(i,"deathThreshold",0,8,1).name("Death Threshold").onChange(a),t.setup=()=>{t.createCanvas(window.innerWidth,window.innerHeight).parent("app"),t.background("white"),t.pixelDensity(1),t.colorMode(t.HSB),window.addEventListener("resize",()=>(function(e){e.resizeCanvas(window.innerWidth,window.innerHeight)})(t)),l(t)},t.draw=()=>{t.background(200,60,10),e.update(t.deltaTime).draw(),c||e.calculateState()},t.mousePressed=i=>{if(i.button===d.MOUSE_BTN.LEFT){c=!0,t.loop();let{clientX:s,clientY:l}=i;if(s>e.horizontalTiles*e.size&&l>e.verticalTiles)return;let a=Math.floor(s/e.size),r=Math.floor(l/e.size);e.updateTile(a,r)}},t.mouseDragged=t=>{if(!c)return;let{clientX:i,clientY:s}=t;if(i>e.horizontalTiles*e.size&&s>e.verticalTiles)return;let l=Math.floor(i/e.size),a=Math.floor(s/e.size);e.updateTile(l,a)},t.mouseReleased=i=>{i.button===d.MOUSE_BTN.LEFT&&(c=!1,e.calculateState(),t.loop())}});
//# sourceMappingURL=basic-ca.56d81442.js.map
