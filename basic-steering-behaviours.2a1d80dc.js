function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,i){Object.defineProperty(e,t,{get:r,set:i,enumerable:!0,configurable:!0})}var r=globalThis,i={},a={},s=r.parcelRequirebf15;null==s&&((s=function(e){if(e in i)return i[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return i[e]=r,t.call(r.exports,r,r.exports),r.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},r.parcelRequirebf15=s);var o=s.register;o("hMArn",function(r,i){t(r.exports,"default",()=>o);var a=s("7Pz0b"),o=class{constructor(e,t){let r={pos:e.createVector(0,0),mass:1,velocity:e.createVector(0,0),acceleration:e.createVector(0,0),maxSpeed:15,maxForce:.25,wanderTheta:0,breakingThreshold:100,r:20,material:e.color("#00ffff"),...t};this.p5=e,this.pos=r.pos,this.mass=r.mass,this.velocity=r.velocity,this.acceleration=r.acceleration,this.maxSpeed=r.maxSpeed,this.maxForce=r.maxForce,this.wanderTheta=r.wanderTheta,this.breakingThreshold=r.breakingThreshold,this.r=r.r,this.material=r.material,this.wanderTheta=0}setValues(e,t){switch(e){case"maxSpeed":this.maxSpeed=t;break;case"maxForce":this.maxForce=t;break;default:throw"Unsupported key passed to setValues()"}}draw(e=!1){return this.p5.push(),this.p5.translate(this.pos.x,this.pos.y),e&&this.drawHelpers(),this.p5.rotate(this.velocity.heading()),this.drawSprite(),this.p5.pop(),this}update(){return this.velocity.add(this.acceleration),this.velocity.limit(this.maxSpeed),this.pos.add(this.velocity),this.acceleration.set(0,0),this}applyForces(e){return e&&this.acceleration.add(e),this}drawSprite(){let e=this.r;return this.p5.stroke(this.material),this.p5.strokeWeight(1),this.p5.noFill(),this.p5.triangle(e,0,-e,e/2,-e,-e/2),this}drawHelpers(){this.p5.stroke(0,80,50);let e=this.velocity.copy();return e.setMag(20*e.mag()),this.p5.line(0,0,e.x,e.y),this}seek(t,r=!1){if(!t)return null;let i=e(a).Vector.sub(t,this.pos),s=this.maxSpeed;if(r){let e=i.mag();e<this.breakingThreshold&&(s=this.p5.map(e,0,this.breakingThreshold,0,this.maxSpeed))}return i.setMag(s),i.sub(this.velocity),i.limit(this.maxForce),i}flee(e){return null===e?null:this.seek(e).mult(-1)}pursue(e){let t=e.pos.copy(),r=e.velocity.copy();return r.mult(40),t.add(r),this.seek(t)}evade(e){let t=this.pursue(e);return t.mult(-1),t}arrive(e){return this.seek(e,!0)}wander(){let e=this.p5.PI/6,t=50*this.p5.cos(this.wanderTheta),r=50*this.p5.sin(this.wanderTheta),i=this.velocity.copy().setMag(100);return i.add(this.p5.createVector(t,r)),i.add(this.pos),this.constraintWithinWindow(this.pos.x,this.pos.y),this.wanderTheta+=this.p5.random(-e,e),this.seek(i)}pathFollow(e){let t=this.velocity.copy().normalize().mult(50).add(this.pos);this.p5.strokeWeight(1),this.p5.stroke(255),this.p5.circle(t.x,t.y,5);let r=e.getClosestSegment(t.x,t.y);return r.length&&r.length>e.radius&&r.intersectionPosition?this.seek(r.intersectionPosition):this.velocity.copy()}constraintWithinWindow(e,t){let{innerWidth:r,innerHeight:i}=window;e<0&&(this.pos.x=r),e>r&&(this.pos.x=0),t<0&&(this.pos.y=i),t>i&&(this.pos.y=0)}}}),o("fK5g3",function(e,r){var i,a;t(e.exports,"defaultEntityConfig",()=>s),t(e.exports,"defaultEdgeConfig",()=>o),t(e.exports,"MOUSE_BTN",()=>i);let s={r:5},o={top:!0,right:!0,bottom:!0,left:!0};(a=i||(i={}))[a.LEFT=0]="LEFT",a[a.MIDDLE=1]="MIDDLE",a[a.RIGHT=2]="RIGHT"});var n=s("e93rA"),c=s("7Pz0b"),d=s("hMArn"),l=s("fK5g3");let h=[],p=null;new(e(c))(e=>{let t={showHelpers:!1,maxSpeed:4,maxForce:.1,mode:"Wander"},r=new n.GUI({autoPlace:!1});function i(e){switch(e.background(200,60,10),p=e.createVector(window.innerWidth/2,window.innerHeight/2),t.mode){case"Seek":a(e);break;case"Flee":h=[],a(e),p=p||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Pursuit":h=[new d.default(e,{pos:e.createVector(window.innerWidth,window.innerHeight),maxSpeed:t.maxSpeed,maxForce:t.maxForce}),new d.default(e,{pos:e.createVector(200,300),maxSpeed:4,maxForce:.3,material:e.color("#0000ff")})],p=p||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Evade":h=[new d.default(e,{pos:e.createVector(300,300),maxSpeed:t.maxSpeed,maxForce:t.maxForce}),new d.default(e,{pos:e.createVector(400,300),maxSpeed:2,maxForce:.1,material:e.color("#0000ff")})],p=p||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Arrive":h=[new d.default(e,{pos:e.createVector(300,300),maxSpeed:t.maxSpeed,maxForce:t.maxForce})],p=p||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Wander":h=[new d.default(e,{pos:e.createVector(window.innerWidth/2,window.innerHeight/2),maxSpeed:t.maxSpeed,maxForce:t.maxForce})],p=null}}function a(e){(h=[]).push(new d.default(e,{pos:e.createVector(200,300),maxSpeed:t.maxSpeed,maxForce:t.maxForce})),p=p||e.createVector(window.innerWidth/2,window.innerHeight/2)}r.domElement.id="gui",document.getElementById("gui")?.appendChild(r.domElement),r.add(t,"mode",["Seek","Flee","Pursuit","Evade","Arrive","Wander"]).name("Example Type").onChange(t=>{i(e)}),r.add(t,"showHelpers"),r.add(t,"maxSpeed",.1,10,.1).onChange(e=>h.forEach((t,r)=>{0===r&&t.setValues("maxSpeed",e)})),r.add(t,"maxForce",.01,2,.01).onChange(e=>h.forEach((t,r)=>{0===r&&t.setValues("maxForce",e)})),e.setup=()=>{e.createCanvas(window.innerWidth,window.innerHeight).parent("app"),e.background("white"),e.pixelDensity(1),e.colorMode(e.HSB),window.addEventListener("resize",()=>(function(e){e.resizeCanvas(window.innerWidth,window.innerHeight)})(e)),i(e)},e.draw=()=>{var r;switch(e.background(200,60,10),(r=p)&&(e.push(),e.translate(r.x,r.y),e.noFill(),e.stroke(0,100,70),e.circle(0,0,5),e.rotate(e.PI/4),e.rectMode(e.CENTER),e.rect(0,0,10),e.pop()),t.mode){case"Seek":(function(){for(let e=0;e<h.length;e++){let r=h[e].seek(p);h[e].applyForces(r),h[e].update(),h[e].draw(t.showHelpers)}})();break;case"Flee":(function(){for(let e=0;e<h.length;e++){let r=h[e].flee(p);h[e].applyForces(r),h[e].update(),h[e].draw(t.showHelpers)}})();break;case"Pursuit":(function(){let e=h[0],r=h[1],i=r.seek(p);r.applyForces(i);let a=e.pursue(r);e.applyForces(a);for(let e=0;e<h.length;e++)h[e].update(),h[e].draw(t.showHelpers)})();break;case"Evade":(function(){let e=h[0],r=h[1],i=e.seek(p);e.applyForces(i);let a=r.evade(e);r.applyForces(a);for(let e=0;e<h.length;e++)h[e].update(),h[e].draw(t.showHelpers)})();break;case"Arrive":(function(){let e=h[0],r=e.arrive(p);e.applyForces(r);for(let e=0;e<h.length;e++)h[e].update(),h[e].draw(t.showHelpers)})();break;case"Wander":(function(){let e=h[0],r=e.wander();e.applyForces(r);for(let e=0;e<h.length;e++)h[e].update(),h[e].draw(t.showHelpers)})()}},e.mouseClicked=r=>{if(r.button!==l.MOUSE_BTN.LEFT)return!1;switch(t.mode){case"Seek":case"Flee":case"Pursuit":case"Evade":case"Arrive":p=e.createVector(r.clientX,r.clientY);break;case"Wander":p=null}return!1}});
//# sourceMappingURL=basic-steering-behaviours.2a1d80dc.js.map
