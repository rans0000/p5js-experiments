{"mappings":"A,S,E,C,E,O,G,E,U,C,E,O,C,C,C,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,U,I,G,I,E,E,SCKA,IAAI,EAAK,GA+PT,IAAA,EA9PA,MAgBI,YAAY,CAAM,CAAE,CAAwC,CAAE,CAe1D,IAAM,EAAS,CAbX,IAAK,EAAG,YAAY,CAAC,EAAG,GACxB,KAAM,EACN,SAAU,EAAG,YAAY,CAAC,EAAG,GAC7B,aAAc,EAAG,YAAY,CAAC,EAAG,GACjC,SAAU,GACV,SAAU,IACV,YAAa,EACb,kBAAmB,IACnB,EAAG,GACH,SAAU,EAAG,KAAK,CAAC,WACnB,iBAAkB,GAClB,iBAAkB,CAAA,EAEa,GAAG,CAAO,AAAC,CAE9C,CAAA,IAAI,CAAC,EAAE,CAAG,EAAE,EACZ,IAAI,CAAC,EAAE,CAAG,EACV,IAAI,CAAC,GAAG,CAAG,EAAO,GAAG,CACrB,IAAI,CAAC,IAAI,CAAG,EAAO,IAAI,CACvB,IAAI,CAAC,QAAQ,CAAG,EAAO,QAAQ,CAC/B,IAAI,CAAC,YAAY,CAAG,EAAO,YAAY,CACvC,IAAI,CAAC,QAAQ,CAAG,EAAO,QAAQ,CAC/B,IAAI,CAAC,QAAQ,CAAG,EAAO,QAAQ,CAC/B,IAAI,CAAC,WAAW,CAAG,EAAO,WAAW,CACrC,IAAI,CAAC,iBAAiB,CAAG,EAAO,iBAAiB,CACjD,IAAI,CAAC,CAAC,CAAG,EAAO,CAAC,CACjB,IAAI,CAAC,QAAQ,CAAG,EAAO,QAAQ,CAC/B,IAAI,CAAC,gBAAgB,CAAG,EAAO,gBAAgB,CAC/C,IAAI,CAAC,gBAAgB,CAAG,EAAO,gBAAgB,CAE/C,IAAI,CAAC,WAAW,CAAG,CACvB,CAEA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","sources":["<anon>","src/libs/autonomous-agent.ts","src/utils/utils.ts","src/scripts/basic-steering-behaviours.ts"],"sourcesContent":["\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequirebf15\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequirebf15\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"hMArn\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $7ed1d321420b0c7f$export$2e2bcd8739ae039);\n\nvar $7Pz0b = parcelRequire(\"7Pz0b\");\nlet $7ed1d321420b0c7f$var$id = -1;\nclass $7ed1d321420b0c7f$var$AutonomousAgent {\n    constructor(p5, _config){\n        const defaultConfig = {\n            pos: p5.createVector(0, 0),\n            mass: 1,\n            velocity: p5.createVector(0, 0),\n            acceleration: p5.createVector(0, 0),\n            maxSpeed: 15,\n            maxForce: 0.25,\n            wanderTheta: 0,\n            breakingThreshold: 100,\n            r: 20,\n            material: p5.color(\"#00ffff\"),\n            perceptionRadius: 10,\n            wrapOnScreenEdge: false\n        };\n        const config = {\n            ...defaultConfig,\n            ..._config\n        };\n        this.id = ++$7ed1d321420b0c7f$var$id;\n        this.p5 = p5;\n        this.pos = config.pos;\n        this.mass = config.mass;\n        this.velocity = config.velocity;\n        this.acceleration = config.acceleration;\n        this.maxSpeed = config.maxSpeed;\n        this.maxForce = config.maxForce;\n        this.wanderTheta = config.wanderTheta;\n        this.breakingThreshold = config.breakingThreshold;\n        this.r = config.r;\n        this.material = config.material;\n        this.perceptionRadius = config.perceptionRadius;\n        this.wrapOnScreenEdge = config.wrapOnScreenEdge;\n        this.wanderTheta = 0;\n    }\n    setValues(key, value) {\n        switch(key){\n            case \"maxSpeed\":\n                this.maxSpeed = value;\n                break;\n            case \"maxForce\":\n                this.maxForce = value;\n                break;\n            case \"perceptionRadius\":\n                this.perceptionRadius = value;\n                break;\n            default:\n                throw \"Unsupported key passed to setValues()\";\n        }\n    }\n    wrapScreen() {\n        const { innerWidth: innerWidth, innerHeight: innerHeight } = window;\n        if (this.pos.x < 0) this.pos.x = innerWidth;\n        else if (this.pos.x > innerWidth) this.pos.x = 0;\n        if (this.pos.y < 0) this.pos.y = innerHeight;\n        else if (this.pos.y > innerHeight) this.pos.y = 0;\n    }\n    draw(showHelper = false) {\n        this.p5.push();\n        this.p5.translate(this.pos.x, this.pos.y);\n        if (showHelper) this.drawHelpers();\n        this.p5.rotate(this.velocity.heading());\n        this.drawSprite();\n        this.p5.pop();\n        return this;\n    }\n    update() {\n        this.velocity.add(this.acceleration.limit(this.maxForce));\n        this.velocity.limit(this.maxSpeed);\n        this.pos.add(this.velocity);\n        this.wrapOnScreenEdge && this.wrapScreen();\n        this.acceleration.set(0, 0);\n        return this;\n    }\n    applyForces(force) {\n        if (!force) return this;\n        this.acceleration.add(force);\n        return this;\n    }\n    drawSprite() {\n        const size = this.r;\n        this.p5.stroke(this.material);\n        this.p5.strokeWeight(1);\n        this.p5.noFill();\n        this.p5.triangle(size, 0, -size, size / 2, -size, -size / 2);\n        this.p5.stroke(50);\n        return this;\n    }\n    drawHelpers() {\n        // draw text\n        this.p5.noStroke();\n        this.p5.fill(255);\n        this.p5.textSize(15);\n        this.p5.text(this.id, 0, 0);\n        // draw perception radius\n        this.p5.noFill();\n        this.velocity.mag() < this.maxSpeed ? this.p5.stroke(0, 80, 50) : this.p5.stroke(50);\n        this.p5.strokeWeight(1);\n        this.p5.circle(0, 0, this.perceptionRadius);\n        // draw heading\n        const temp = this.velocity.copy().mult(20);\n        this.p5.line(0, 0, temp.x, temp.y);\n        return this;\n    }\n    seek(target, isArriving = false) {\n        if (!target) return this.p5.createVector();\n        let force = (0, (/*@__PURE__*/$parcel$interopDefault($7Pz0b))).Vector.sub(target, this.pos);\n        let desiredVelocity = this.maxSpeed;\n        if (isArriving) {\n            const distance = force.mag();\n            if (distance < this.breakingThreshold) desiredVelocity = this.p5.map(distance, 0, this.breakingThreshold, 0, this.maxSpeed);\n        }\n        force.setMag(desiredVelocity);\n        force.sub(this.velocity);\n        force.limit(this.maxForce);\n        return force;\n    }\n    flee(target) {\n        if (target === null) return null;\n        return this.seek(target).mult(-1);\n    }\n    pursue(agent) {\n        const target = agent.pos.copy();\n        let predictedPos = agent.velocity.copy();\n        predictedPos.mult(40);\n        target.add(predictedPos);\n        return this.seek(target);\n    }\n    evade(agent) {\n        let a = this.pursue(agent);\n        a.mult(-1);\n        return a;\n    }\n    arrive(target) {\n        return this.seek(target, true);\n    }\n    wander() {\n        const lookahead = 100;\n        const lookaheadRadius = 50;\n        const deltaTheta = this.p5.PI / 6;\n        const x = lookaheadRadius * this.p5.cos(this.wanderTheta);\n        const y = lookaheadRadius * this.p5.sin(this.wanderTheta);\n        const targetPos = this.velocity.copy().setMag(lookahead);\n        targetPos.add(this.p5.createVector(x, y));\n        targetPos.add(this.pos);\n        this.constraintWithinWindow(this.pos.x, this.pos.y);\n        this.wanderTheta += this.p5.random(-deltaTheta, deltaTheta);\n        return this.seek(targetPos);\n    }\n    pathFollow(path) {\n        const lookahead = 50;\n        const target = this.velocity.copy().normalize().mult(lookahead).add(this.pos);\n        this.p5.strokeWeight(1);\n        this.p5.stroke(255);\n        this.p5.circle(target.x, target.y, 5);\n        const closest = path.getClosestSegment(target.x, target.y);\n        if (closest.length && closest.length > path.radius && closest.intersectionPosition) return this.seek(closest.intersectionPosition);\n        return this.velocity.copy();\n    }\n    groupBehaviour(agents) {\n        let alignment = this.p5.createVector();\n        let cohesion = this.p5.createVector();\n        let separation = this.p5.createVector();\n        const numberOfAgents = agents.length;\n        for(let i = 0; i < numberOfAgents; i++){\n            if (agents[i] === this) continue;\n            const distance = (0, (/*@__PURE__*/$parcel$interopDefault($7Pz0b))).Vector.dist(agents[i].pos, this.pos);\n            if (distance > this.perceptionRadius) continue;\n            alignment.add(agents[i].velocity);\n            cohesion.add(agents[i].pos);\n            const diff = this.pos.copy().sub(agents[i].pos); //\n            // .div(distance); //\n            separation.add(diff);\n            this.p5.stroke(20);\n            this.p5.strokeWeight(2);\n            // this.p5.line(agents[i].pos.x, agents[i].pos.y, this.pos.x, this.pos.y);\n            if (numberOfAgents - 1 > 0) {\n                alignment.div(numberOfAgents - 1).sub(this.velocity).setMag(this.maxSpeed);\n                cohesion.div(numberOfAgents - 1).sub(this.pos).setMag(this.maxSpeed);\n                separation.div(numberOfAgents - 1).sub(this.velocity).setMag(this.maxSpeed);\n            }\n        }\n        return {\n            alignment: alignment,\n            cohesion: cohesion,\n            separation: separation\n        };\n    }\n    constraintWithinWindow(x, y) {\n        const { innerWidth: innerWidth, innerHeight: innerHeight } = window;\n        if (x < 0) this.pos.x = innerWidth;\n        if (x > innerWidth) this.pos.x = 0;\n        if (y < 0) this.pos.y = innerHeight;\n        if (y > innerHeight) this.pos.y = 0;\n    }\n}\nvar $7ed1d321420b0c7f$export$2e2bcd8739ae039 = $7ed1d321420b0c7f$var$AutonomousAgent;\n\n});\n\nparcelRegister(\"fK5g3\", function(module, exports) {\n\n$parcel$export(module.exports, \"defaultEntityConfig\", () => $28770b279d7ab5b1$export$73820bb3da69f923);\n$parcel$export(module.exports, \"defaultEdgeConfig\", () => $28770b279d7ab5b1$export$1ea8cd15d9ca5dee);\n$parcel$export(module.exports, \"MOUSE_BTN\", () => $28770b279d7ab5b1$export$bfd2dc5313efa3a3);\nconst $28770b279d7ab5b1$export$73820bb3da69f923 = {\n    r: 5\n};\nconst $28770b279d7ab5b1$export$1ea8cd15d9ca5dee = {\n    top: true,\n    right: true,\n    bottom: true,\n    left: true\n};\nvar $28770b279d7ab5b1$export$bfd2dc5313efa3a3;\n(function(MOUSE_BTN) {\n    MOUSE_BTN[MOUSE_BTN[\"LEFT\"] = 0] = \"LEFT\";\n    MOUSE_BTN[MOUSE_BTN[\"MIDDLE\"] = 1] = \"MIDDLE\";\n    MOUSE_BTN[MOUSE_BTN[\"RIGHT\"] = 2] = \"RIGHT\";\n})($28770b279d7ab5b1$export$bfd2dc5313efa3a3 || ($28770b279d7ab5b1$export$bfd2dc5313efa3a3 = {}));\n\n});\n\n\nvar $e93rA = parcelRequire(\"e93rA\");\n\nvar $7Pz0b = parcelRequire(\"7Pz0b\");\n\nvar $hMArn = parcelRequire(\"hMArn\");\n\nvar $fK5g3 = parcelRequire(\"fK5g3\");\nlet $d1e7adb6475947b9$var$agents = [];\nlet $d1e7adb6475947b9$var$target = null;\n/**--------------------------------- */ // sketch\nconst $d1e7adb6475947b9$var$sketch = (p5)=>{\n    const options = {\n        showHelpers: false,\n        maxSpeed: 4,\n        maxForce: 0.1,\n        mode: \"Wander\"\n    };\n    const gui = new (0, $e93rA.GUI)({\n        autoPlace: false\n    });\n    gui.domElement.id = \"gui\";\n    document.getElementById(\"gui\")?.appendChild(gui.domElement);\n    gui.add(options, \"mode\", [\n        \"Seek\",\n        \"Flee\",\n        \"Pursuit\",\n        \"Evade\",\n        \"Arrive\",\n        \"Wander\"\n    ]).name(\"Example Type\").onChange((val)=>{\n        init(p5);\n    });\n    gui.add(options, \"showHelpers\");\n    gui.add(options, \"maxSpeed\", 0.1, 10, 0.1).onChange((val)=>$d1e7adb6475947b9$var$agents.forEach((agent, i)=>{\n            if (i === 0) agent.setValues(\"maxSpeed\", val);\n        }));\n    gui.add(options, \"maxForce\", 0.01, 2, 0.01).onChange((val)=>$d1e7adb6475947b9$var$agents.forEach((agent, i)=>{\n            if (i === 0) agent.setValues(\"maxForce\", val);\n        }));\n    /** setup */ p5.setup = ()=>{\n        const canvas = p5.createCanvas(window.innerWidth, window.innerHeight);\n        canvas.parent(\"app\");\n        p5.background(\"white\");\n        p5.pixelDensity(1);\n        p5.colorMode(p5.HSB);\n        window.addEventListener(\"resize\", ()=>resizeDisplay(p5));\n        init(p5);\n    };\n    /** draw */ p5.draw = ()=>{\n        p5.background(200, 60, 10);\n        drawTarget($d1e7adb6475947b9$var$target);\n        switch(options.mode){\n            case \"Seek\":\n                seek();\n                break;\n            case \"Flee\":\n                flee();\n                break;\n            case \"Pursuit\":\n                pursuit();\n                break;\n            case \"Evade\":\n                evade();\n                break;\n            case \"Arrive\":\n                arrive();\n                break;\n            case \"Wander\":\n                wander();\n                break;\n            default:\n                break;\n        }\n    };\n    p5.mouseClicked = (e)=>{\n        if (e.button !== (0, $fK5g3.MOUSE_BTN).LEFT) return false;\n        switch(options.mode){\n            case \"Seek\":\n            case \"Flee\":\n            case \"Pursuit\":\n            case \"Evade\":\n            case \"Arrive\":\n                $d1e7adb6475947b9$var$target = p5.createVector(e.clientX, e.clientY);\n                break;\n            case \"Wander\":\n                $d1e7adb6475947b9$var$target = null;\n                break;\n            default:\n                break;\n        }\n        return false;\n    };\n    /**--------------------------------- */ // functions\n    function resizeDisplay(canvas) {\n        canvas.resizeCanvas(window.innerWidth, window.innerHeight);\n    }\n    function init(p5) {\n        p5.background(200, 60, 10);\n        $d1e7adb6475947b9$var$target = p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\n        switch(options.mode){\n            case \"Seek\":\n                initSeek(p5);\n                break;\n            case \"Flee\":\n                initFlee(p5);\n                break;\n            case \"Pursuit\":\n                initPursuit(p5);\n                break;\n            case \"Evade\":\n                initEvade(p5);\n                break;\n            case \"Arrive\":\n                initArrive(p5);\n                break;\n            case \"Wander\":\n                initWander(p5);\n                break;\n            default:\n                break;\n        }\n    }\n    function initSeek(p5) {\n        $d1e7adb6475947b9$var$agents = [];\n        $d1e7adb6475947b9$var$agents.push(new (0, $hMArn.default)(p5, {\n            pos: p5.createVector(200, 300),\n            maxSpeed: options.maxSpeed,\n            maxForce: options.maxForce\n        }));\n        $d1e7adb6475947b9$var$target = $d1e7adb6475947b9$var$target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\n    }\n    function seek() {\n        for(let i = 0; i < $d1e7adb6475947b9$var$agents.length; i++){\n            const force = $d1e7adb6475947b9$var$agents[i].seek($d1e7adb6475947b9$var$target);\n            $d1e7adb6475947b9$var$agents[i].applyForces(force);\n            $d1e7adb6475947b9$var$agents[i].update();\n            $d1e7adb6475947b9$var$agents[i].draw(options.showHelpers);\n        }\n    }\n    function initFlee(p5) {\n        $d1e7adb6475947b9$var$agents = [];\n        initSeek(p5);\n        $d1e7adb6475947b9$var$target = $d1e7adb6475947b9$var$target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\n    }\n    function flee() {\n        for(let i = 0; i < $d1e7adb6475947b9$var$agents.length; i++){\n            const force = $d1e7adb6475947b9$var$agents[i].flee($d1e7adb6475947b9$var$target);\n            $d1e7adb6475947b9$var$agents[i].applyForces(force);\n            $d1e7adb6475947b9$var$agents[i].update();\n            $d1e7adb6475947b9$var$agents[i].draw(options.showHelpers);\n        }\n    }\n    function initPursuit(p5) {\n        const player = new (0, $hMArn.default)(p5, {\n            pos: p5.createVector(window.innerWidth, window.innerHeight),\n            maxSpeed: options.maxSpeed,\n            maxForce: options.maxForce\n        });\n        const aiBot = new (0, $hMArn.default)(p5, {\n            pos: p5.createVector(200, 300),\n            maxSpeed: 4,\n            maxForce: 0.3,\n            material: p5.color(\"#0000ff\")\n        });\n        $d1e7adb6475947b9$var$agents = [\n            player,\n            aiBot\n        ];\n        $d1e7adb6475947b9$var$target = $d1e7adb6475947b9$var$target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\n    }\n    function pursuit() {\n        const player = $d1e7adb6475947b9$var$agents[0];\n        const aiBot = $d1e7adb6475947b9$var$agents[1];\n        const seek = aiBot.seek($d1e7adb6475947b9$var$target);\n        aiBot.applyForces(seek);\n        const attack = player.pursue(aiBot);\n        player.applyForces(attack);\n        for(let i = 0; i < $d1e7adb6475947b9$var$agents.length; i++){\n            $d1e7adb6475947b9$var$agents[i].update();\n            $d1e7adb6475947b9$var$agents[i].draw(options.showHelpers);\n        }\n    }\n    function initEvade(p5) {\n        const player = new (0, $hMArn.default)(p5, {\n            pos: p5.createVector(300, 300),\n            maxSpeed: options.maxSpeed,\n            maxForce: options.maxForce\n        });\n        const runner = new (0, $hMArn.default)(p5, {\n            pos: p5.createVector(400, 300),\n            maxSpeed: 2,\n            maxForce: 0.1,\n            material: p5.color(\"#0000ff\")\n        });\n        $d1e7adb6475947b9$var$agents = [\n            player,\n            runner\n        ];\n        $d1e7adb6475947b9$var$target = $d1e7adb6475947b9$var$target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\n    }\n    function evade() {\n        const player = $d1e7adb6475947b9$var$agents[0];\n        const runner = $d1e7adb6475947b9$var$agents[1];\n        const seek = player.seek($d1e7adb6475947b9$var$target);\n        player.applyForces(seek);\n        const force = runner.evade(player);\n        runner.applyForces(force);\n        for(let i = 0; i < $d1e7adb6475947b9$var$agents.length; i++){\n            $d1e7adb6475947b9$var$agents[i].update();\n            $d1e7adb6475947b9$var$agents[i].draw(options.showHelpers);\n        }\n    }\n    function initArrive(p5) {\n        const player = new (0, $hMArn.default)(p5, {\n            pos: p5.createVector(300, 300),\n            maxSpeed: options.maxSpeed,\n            maxForce: options.maxForce\n        });\n        $d1e7adb6475947b9$var$agents = [\n            player\n        ];\n        $d1e7adb6475947b9$var$target = $d1e7adb6475947b9$var$target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\n    }\n    function arrive() {\n        const player = $d1e7adb6475947b9$var$agents[0];\n        const arrive = player.arrive($d1e7adb6475947b9$var$target);\n        player.applyForces(arrive);\n        for(let i = 0; i < $d1e7adb6475947b9$var$agents.length; i++){\n            $d1e7adb6475947b9$var$agents[i].update();\n            $d1e7adb6475947b9$var$agents[i].draw(options.showHelpers);\n        }\n    }\n    function initWander(p5) {\n        const player = new (0, $hMArn.default)(p5, {\n            pos: p5.createVector(window.innerWidth / 2, window.innerHeight / 2),\n            maxSpeed: options.maxSpeed,\n            maxForce: options.maxForce\n        });\n        $d1e7adb6475947b9$var$agents = [\n            player\n        ];\n        $d1e7adb6475947b9$var$target = null;\n    }\n    function wander() {\n        const player = $d1e7adb6475947b9$var$agents[0];\n        const wander = player.wander();\n        player.applyForces(wander);\n        for(let i = 0; i < $d1e7adb6475947b9$var$agents.length; i++){\n            $d1e7adb6475947b9$var$agents[i].update();\n            $d1e7adb6475947b9$var$agents[i].draw(options.showHelpers);\n        }\n    }\n    function drawTarget(target) {\n        if (!target) return;\n        p5.push();\n        p5.translate(target.x, target.y);\n        p5.noFill();\n        p5.stroke(0, 100, 70);\n        p5.circle(0, 0, 5);\n        p5.rotate(p5.PI / 4);\n        p5.rectMode(p5.CENTER);\n        p5.rect(0, 0, 10);\n        p5.pop();\n    }\n/**--------------------------------- */ // classes\n};\nnew (0, (/*@__PURE__*/$parcel$interopDefault($7Pz0b)))($d1e7adb6475947b9$var$sketch);\n\n\n//# sourceMappingURL=basic-steering-behaviours.aa4967d8.js.map\n","import P5 from 'p5';\r\nimport { TAutonomousAgentConfig, TGroupBehaviour } from '../utils/types';\r\nimport InteractivePath from './interactive-path';\r\n\r\ntype Keys = 'maxSpeed' | 'maxForce' | 'perceptionRadius';\r\nlet id = -1;\r\nclass AutonomousAgent {\r\n    id: number;\r\n    p5: P5;\r\n    pos: P5.Vector;\r\n    mass: number;\r\n    velocity: P5.Vector;\r\n    acceleration: P5.Vector;\r\n    maxSpeed: number;\r\n    maxForce: number;\r\n    wanderTheta: number;\r\n    breakingThreshold: number;\r\n    r: number;\r\n    material: P5.Color;\r\n    perceptionRadius: number;\r\n    wrapOnScreenEdge: boolean;\r\n\r\n    constructor(p5: P5, _config: Partial<TAutonomousAgentConfig>) {\r\n        const defaultConfig: TAutonomousAgentConfig = {\r\n            pos: p5.createVector(0, 0),\r\n            mass: 1,\r\n            velocity: p5.createVector(0, 0),\r\n            acceleration: p5.createVector(0, 0),\r\n            maxSpeed: 15,\r\n            maxForce: 0.25,\r\n            wanderTheta: 0,\r\n            breakingThreshold: 100,\r\n            r: 20,\r\n            material: p5.color('#00ffff'),\r\n            perceptionRadius: 10,\r\n            wrapOnScreenEdge: false\r\n        };\r\n        const config = { ...defaultConfig, ..._config };\r\n\r\n        this.id = ++id;\r\n        this.p5 = p5;\r\n        this.pos = config.pos;\r\n        this.mass = config.mass;\r\n        this.velocity = config.velocity;\r\n        this.acceleration = config.acceleration;\r\n        this.maxSpeed = config.maxSpeed;\r\n        this.maxForce = config.maxForce;\r\n        this.wanderTheta = config.wanderTheta;\r\n        this.breakingThreshold = config.breakingThreshold;\r\n        this.r = config.r;\r\n        this.material = config.material;\r\n        this.perceptionRadius = config.perceptionRadius;\r\n        this.wrapOnScreenEdge = config.wrapOnScreenEdge;\r\n\r\n        this.wanderTheta = 0;\r\n    }\r\n\r\n    setValues(key: Keys, value: number) {\r\n        switch (key) {\r\n            case 'maxSpeed':\r\n                this.maxSpeed = value;\r\n                break;\r\n            case 'maxForce':\r\n                this.maxForce = value;\r\n                break;\r\n            case 'perceptionRadius':\r\n                this.perceptionRadius = value;\r\n                break;\r\n            default:\r\n                throw 'Unsupported key passed to setValues()';\r\n        }\r\n    }\r\n\r\n    wrapScreen() {\r\n        const { innerWidth, innerHeight } = window;\r\n\r\n        if (this.pos.x < 0) {\r\n            this.pos.x = innerWidth;\r\n        } else if (this.pos.x > innerWidth) {\r\n            this.pos.x = 0;\r\n        }\r\n        if (this.pos.y < 0) {\r\n            this.pos.y = innerHeight;\r\n        } else if (this.pos.y > innerHeight) {\r\n            this.pos.y = 0;\r\n        }\r\n    }\r\n\r\n    draw(showHelper: boolean = false) {\r\n        this.p5.push();\r\n        this.p5.translate(this.pos.x, this.pos.y);\r\n        if (showHelper) this.drawHelpers();\r\n        this.p5.rotate(this.velocity.heading());\r\n        this.drawSprite();\r\n        this.p5.pop();\r\n        return this;\r\n    }\r\n\r\n    update() {\r\n        this.velocity.add(this.acceleration.limit(this.maxForce));\r\n        this.velocity.limit(this.maxSpeed);\r\n        this.pos.add(this.velocity);\r\n        this.wrapOnScreenEdge && this.wrapScreen();\r\n        this.acceleration.set(0, 0);\r\n        return this;\r\n    }\r\n\r\n    applyForces(force: P5.Vector | null) {\r\n        if (!force) return this;\r\n        this.acceleration.add(force);\r\n        return this;\r\n    }\r\n\r\n    drawSprite() {\r\n        const size = this.r;\r\n        this.p5.stroke(this.material);\r\n        this.p5.strokeWeight(1);\r\n        this.p5.noFill();\r\n        this.p5.triangle(size, 0, -size, size / 2, -size, -size / 2);\r\n        this.p5.stroke(50);\r\n        return this;\r\n    }\r\n\r\n    drawHelpers() {\r\n        // draw text\r\n        this.p5.noStroke();\r\n        this.p5.fill(255);\r\n        this.p5.textSize(15);\r\n        this.p5.text(this.id, 0, 0);\r\n        // draw perception radius\r\n        this.p5.noFill();\r\n        this.velocity.mag() < this.maxSpeed ? this.p5.stroke(0, 80, 50) : this.p5.stroke(50);\r\n        this.p5.strokeWeight(1);\r\n        this.p5.circle(0, 0, this.perceptionRadius);\r\n        // draw heading\r\n        const temp = this.velocity.copy().mult(20);\r\n        this.p5.line(0, 0, temp.x, temp.y);\r\n        return this;\r\n    }\r\n\r\n    seek(target: P5.Vector | null, isArriving: boolean = false): P5.Vector {\r\n        if (!target) return this.p5.createVector();\r\n        let force = P5.Vector.sub(target, this.pos);\r\n        let desiredVelocity = this.maxSpeed;\r\n\r\n        if (isArriving) {\r\n            const distance = force.mag();\r\n            if (distance < this.breakingThreshold) {\r\n                desiredVelocity = this.p5.map(distance, 0, this.breakingThreshold, 0, this.maxSpeed);\r\n            }\r\n        }\r\n\r\n        force.setMag(desiredVelocity);\r\n        force.sub(this.velocity);\r\n        force.limit(this.maxForce);\r\n        return force;\r\n    }\r\n\r\n    flee(target: P5.Vector | null) {\r\n        if (target === null) return null;\r\n        return this.seek(target)!.mult(-1);\r\n    }\r\n\r\n    pursue(agent: AutonomousAgent) {\r\n        const target = agent.pos.copy();\r\n        let predictedPos = agent.velocity.copy();\r\n        predictedPos.mult(40);\r\n        target.add(predictedPos);\r\n        return this.seek(target);\r\n    }\r\n\r\n    evade(agent: AutonomousAgent) {\r\n        let a = this.pursue(agent);\r\n        a!.mult(-1);\r\n        return a;\r\n    }\r\n\r\n    arrive(target: P5.Vector | null) {\r\n        return this.seek(target, true);\r\n    }\r\n\r\n    wander(): P5.Vector {\r\n        const lookahead = 100;\r\n        const lookaheadRadius = 50;\r\n        const deltaTheta = this.p5.PI / 6;\r\n\r\n        const x = lookaheadRadius * this.p5.cos(this.wanderTheta);\r\n        const y = lookaheadRadius * this.p5.sin(this.wanderTheta);\r\n        const targetPos = this.velocity.copy().setMag(lookahead);\r\n        targetPos.add(this.p5.createVector(x, y));\r\n        targetPos.add(this.pos);\r\n\r\n        this.constraintWithinWindow(this.pos.x, this.pos.y);\r\n\r\n        this.wanderTheta += this.p5.random(-deltaTheta, deltaTheta);\r\n        return this.seek(targetPos);\r\n    }\r\n\r\n    pathFollow(path: InteractivePath): P5.Vector {\r\n        const lookahead = 50;\r\n        const target = this.velocity.copy().normalize().mult(lookahead).add(this.pos);\r\n        this.p5.strokeWeight(1);\r\n        this.p5.stroke(255);\r\n        this.p5.circle(target.x, target.y, 5);\r\n        const closest = path.getClosestSegment(target.x, target.y);\r\n        if (closest.length && closest.length > path.radius && closest.intersectionPosition) {\r\n            return this.seek(closest.intersectionPosition);\r\n        }\r\n        return this.velocity.copy();\r\n    }\r\n\r\n    groupBehaviour(agents: AutonomousAgent[]): TGroupBehaviour {\r\n        let alignment = this.p5.createVector();\r\n        let cohesion = this.p5.createVector();\r\n        let separation = this.p5.createVector();\r\n        const numberOfAgents = agents.length;\r\n\r\n        for (let i = 0; i < numberOfAgents; i++) {\r\n            if (agents[i] === this) continue;\r\n            const distance = P5.Vector.dist(agents[i].pos, this.pos);\r\n            if (distance > this.perceptionRadius) continue;\r\n\r\n            alignment.add(agents[i].velocity);\r\n            cohesion.add(agents[i].pos);\r\n            const diff = this.pos.copy().sub(agents[i].pos); //\r\n            // .div(distance); //\r\n\r\n            separation.add(diff);\r\n\r\n            this.p5.stroke(20);\r\n            this.p5.strokeWeight(2);\r\n            // this.p5.line(agents[i].pos.x, agents[i].pos.y, this.pos.x, this.pos.y);\r\n\r\n            if (numberOfAgents - 1 > 0) {\r\n                alignment\r\n                    .div(numberOfAgents - 1)\r\n                    .sub(this.velocity)\r\n                    .setMag(this.maxSpeed);\r\n                cohesion\r\n                    .div(numberOfAgents - 1)\r\n                    .sub(this.pos)\r\n                    .setMag(this.maxSpeed);\r\n                separation\r\n                    .div(numberOfAgents - 1)\r\n                    .sub(this.velocity)\r\n                    .setMag(this.maxSpeed);\r\n            }\r\n        }\r\n        return { alignment, cohesion, separation };\r\n    }\r\n\r\n    constraintWithinWindow(x: number, y: number) {\r\n        const { innerWidth, innerHeight } = window;\r\n        if (x < 0) this.pos.x = innerWidth;\r\n        if (x > innerWidth) this.pos.x = 0;\r\n        if (y < 0) this.pos.y = innerHeight;\r\n        if (y > innerHeight) this.pos.y = 0;\r\n    }\r\n}\r\n\r\nexport default AutonomousAgent;\r\n","import { TEdges } from './types';\r\n\r\nexport const defaultEntityConfig = { r: 5 };\r\nexport const defaultEdgeConfig: TEdges = {\r\n    top: true,\r\n    right: true,\r\n    bottom: true,\r\n    left: true\r\n};\r\nexport enum MOUSE_BTN {\r\n    LEFT,\r\n    MIDDLE,\r\n    RIGHT\r\n}\r\n","import { GUI } from 'dat.gui';\r\nimport P5 from 'p5';\r\nimport AutonomousAgent from '../libs/autonomous-agent';\r\nimport { MOUSE_BTN } from '../utils/utils';\r\n\r\n/**--------------------------------- */\r\n// variables & types\r\ntype TMode = 'Seek' | 'Flee' | 'Pursuit' | 'Evade' | 'Arrive' | 'Wander';\r\nlet agents: AutonomousAgent[] = [];\r\nlet target: P5.Vector | null = null;\r\n\r\n/**--------------------------------- */\r\n// sketch\r\nconst sketch = (p5: P5) => {\r\n    const options = {\r\n        showHelpers: false,\r\n        maxSpeed: 4,\r\n        maxForce: 0.1,\r\n        mode: 'Wander' as TMode\r\n    };\r\n\r\n    const gui = new GUI({ autoPlace: false });\r\n    gui.domElement.id = 'gui';\r\n    document.getElementById('gui')?.appendChild(gui.domElement);\r\n    gui.add(options, 'mode', ['Seek', 'Flee', 'Pursuit', 'Evade', 'Arrive', 'Wander'])\r\n        .name('Example Type')\r\n        .onChange((val: TMode) => {\r\n            init(p5);\r\n        });\r\n    gui.add(options, 'showHelpers');\r\n    gui.add(options, 'maxSpeed', 0.1, 10, 0.1).onChange((val) =>\r\n        agents.forEach((agent, i) => {\r\n            if (i === 0) {\r\n                agent.setValues('maxSpeed', val);\r\n            }\r\n        })\r\n    );\r\n    gui.add(options, 'maxForce', 0.01, 2, 0.01).onChange((val) =>\r\n        agents.forEach((agent, i) => {\r\n            if (i === 0) {\r\n                agent.setValues('maxForce', val);\r\n            }\r\n        })\r\n    );\r\n\r\n    /** setup */\r\n    p5.setup = () => {\r\n        const canvas = p5.createCanvas(window.innerWidth, window.innerHeight);\r\n        canvas.parent('app');\r\n        p5.background('white');\r\n        p5.pixelDensity(1);\r\n        p5.colorMode(p5.HSB);\r\n        window.addEventListener('resize', () => resizeDisplay(p5));\r\n        init(p5);\r\n    };\r\n\r\n    /** draw */\r\n    p5.draw = () => {\r\n        p5.background(200, 60, 10);\r\n\r\n        drawTarget(target);\r\n        switch (options.mode) {\r\n            case 'Seek':\r\n                seek();\r\n                break;\r\n            case 'Flee':\r\n                flee();\r\n                break;\r\n            case 'Pursuit':\r\n                pursuit();\r\n                break;\r\n            case 'Evade':\r\n                evade();\r\n                break;\r\n            case 'Arrive':\r\n                arrive();\r\n                break;\r\n            case 'Wander':\r\n                wander();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    };\r\n\r\n    p5.mouseClicked = (e: MouseEvent) => {\r\n        if (e.button !== MOUSE_BTN.LEFT) return false;\r\n        switch (options.mode) {\r\n            case 'Seek':\r\n            case 'Flee':\r\n            case 'Pursuit':\r\n            case 'Evade':\r\n            case 'Arrive':\r\n                target = p5.createVector(e.clientX, e.clientY);\r\n                break;\r\n            case 'Wander':\r\n                target = null;\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        return false;\r\n    };\r\n\r\n    /**--------------------------------- */\r\n    // functions\r\n\r\n    function resizeDisplay(canvas: P5) {\r\n        canvas.resizeCanvas(window.innerWidth, window.innerHeight);\r\n    }\r\n\r\n    function init(p5: P5) {\r\n        p5.background(200, 60, 10);\r\n        target = p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\r\n        switch (options.mode) {\r\n            case 'Seek':\r\n                initSeek(p5);\r\n                break;\r\n            case 'Flee':\r\n                initFlee(p5);\r\n                break;\r\n            case 'Pursuit':\r\n                initPursuit(p5);\r\n                break;\r\n            case 'Evade':\r\n                initEvade(p5);\r\n                break;\r\n            case 'Arrive':\r\n                initArrive(p5);\r\n                break;\r\n            case 'Wander':\r\n                initWander(p5);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    function initSeek(p5: P5) {\r\n        agents = [];\r\n        agents.push(\r\n            new AutonomousAgent(p5, {\r\n                pos: p5.createVector(200, 300),\r\n                maxSpeed: options.maxSpeed,\r\n                maxForce: options.maxForce\r\n            })\r\n        );\r\n        target = target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\r\n    }\r\n\r\n    function seek() {\r\n        for (let i = 0; i < agents.length; i++) {\r\n            const force = agents[i].seek(target);\r\n            agents[i].applyForces(force);\r\n            agents[i].update();\r\n            agents[i].draw(options.showHelpers);\r\n        }\r\n    }\r\n\r\n    function initFlee(p5: P5) {\r\n        agents = [];\r\n        initSeek(p5);\r\n        target = target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\r\n    }\r\n\r\n    function flee() {\r\n        for (let i = 0; i < agents.length; i++) {\r\n            const force = agents[i].flee(target);\r\n            agents[i].applyForces(force);\r\n            agents[i].update();\r\n            agents[i].draw(options.showHelpers);\r\n        }\r\n    }\r\n\r\n    function initPursuit(p5: P5) {\r\n        const player = new AutonomousAgent(p5, {\r\n            pos: p5.createVector(window.innerWidth, window.innerHeight),\r\n            maxSpeed: options.maxSpeed,\r\n            maxForce: options.maxForce\r\n        });\r\n        const aiBot = new AutonomousAgent(p5, {\r\n            pos: p5.createVector(200, 300),\r\n            maxSpeed: 4,\r\n            maxForce: 0.3,\r\n            material: p5.color('#0000ff')\r\n        });\r\n        agents = [player, aiBot];\r\n        target = target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\r\n    }\r\n\r\n    function pursuit() {\r\n        const player = agents[0];\r\n        const aiBot = agents[1];\r\n\r\n        const seek = aiBot.seek(target);\r\n        aiBot.applyForces(seek);\r\n        const attack = player.pursue(aiBot);\r\n        player.applyForces(attack);\r\n\r\n        for (let i = 0; i < agents.length; i++) {\r\n            agents[i].update();\r\n            agents[i].draw(options.showHelpers);\r\n        }\r\n    }\r\n\r\n    function initEvade(p5: P5) {\r\n        const player = new AutonomousAgent(p5, {\r\n            pos: p5.createVector(300, 300),\r\n            maxSpeed: options.maxSpeed,\r\n            maxForce: options.maxForce\r\n        });\r\n        const runner = new AutonomousAgent(p5, {\r\n            pos: p5.createVector(400, 300),\r\n            maxSpeed: 2,\r\n            maxForce: 0.1,\r\n            material: p5.color('#0000ff')\r\n        });\r\n        agents = [player, runner];\r\n        target = target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\r\n    }\r\n\r\n    function evade() {\r\n        const player = agents[0];\r\n        const runner = agents[1];\r\n\r\n        const seek = player.seek(target);\r\n        player.applyForces(seek);\r\n        const force = runner.evade(player);\r\n        runner.applyForces(force);\r\n\r\n        for (let i = 0; i < agents.length; i++) {\r\n            agents[i].update();\r\n            agents[i].draw(options.showHelpers);\r\n        }\r\n    }\r\n\r\n    function initArrive(p5: P5) {\r\n        const player = new AutonomousAgent(p5, {\r\n            pos: p5.createVector(300, 300),\r\n            maxSpeed: options.maxSpeed,\r\n            maxForce: options.maxForce\r\n        });\r\n        agents = [player];\r\n        target = target || p5.createVector(window.innerWidth / 2, window.innerHeight / 2);\r\n    }\r\n\r\n    function arrive() {\r\n        const player = agents[0];\r\n\r\n        const arrive = player.arrive(target);\r\n        player.applyForces(arrive);\r\n\r\n        for (let i = 0; i < agents.length; i++) {\r\n            agents[i].update();\r\n            agents[i].draw(options.showHelpers);\r\n        }\r\n    }\r\n\r\n    function initWander(p5: P5) {\r\n        const player = new AutonomousAgent(p5, {\r\n            pos: p5.createVector(window.innerWidth / 2, window.innerHeight / 2),\r\n            maxSpeed: options.maxSpeed,\r\n            maxForce: options.maxForce\r\n        });\r\n        agents = [player];\r\n        target = null;\r\n    }\r\n\r\n    function wander() {\r\n        const player = agents[0];\r\n\r\n        const wander = player.wander();\r\n        player.applyForces(wander);\r\n\r\n        for (let i = 0; i < agents.length; i++) {\r\n            agents[i].update();\r\n            agents[i].draw(options.showHelpers);\r\n        }\r\n    }\r\n\r\n    function drawTarget(target: P5.Vector | null) {\r\n        if (!target) return;\r\n\r\n        p5.push();\r\n        p5.translate(target.x, target.y);\r\n        p5.noFill();\r\n        p5.stroke(0, 100, 70);\r\n        p5.circle(0, 0, 5);\r\n        p5.rotate(p5.PI / 4);\r\n        p5.rectMode(p5.CENTER);\r\n        p5.rect(0, 0, 10);\r\n        p5.pop();\r\n    }\r\n\r\n    /**--------------------------------- */\r\n    // classes\r\n};\r\n\r\nnew P5(sketch);\r\n"],"names":["$parcel$interopDefault","a","__esModule","default","$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$7ed1d321420b0c7f$export$2e2bcd8739ae039","$7Pz0b","$7ed1d321420b0c7f$var$id","constructor","p5","_config","config","pos","createVector","mass","velocity","acceleration","maxSpeed","maxForce","wanderTheta","breakingThreshold","r","material","color","perceptionRadius","wrapOnScreenEdge","setValues","key","value","wrapScreen","innerWidth","innerHeight","window","x","y","draw","showHelper","push","translate","drawHelpers","rotate","heading","drawSprite","pop","update","add","limit","applyForces","force","size","stroke","strokeWeight","noFill","triangle","noStroke","fill","textSize","text","mag","circle","temp","copy","mult","line","seek","target","isArriving","Vector","sub","desiredVelocity","distance","map","setMag","flee","pursue","agent","predictedPos","evade","arrive","wander","deltaTheta","PI","lookaheadRadius","cos","sin","targetPos","constraintWithinWindow","random","pathFollow","path","normalize","closest","getClosestSegment","length","radius","intersectionPosition","groupBehaviour","agents","alignment","cohesion","separation","numberOfAgents","i","dist","diff","div","$28770b279d7ab5b1$export$bfd2dc5313efa3a3","MOUSE_BTN","$28770b279d7ab5b1$export$73820bb3da69f923","$28770b279d7ab5b1$export$1ea8cd15d9ca5dee","top","right","bottom","left","$e93rA","$hMArn","$fK5g3","$d1e7adb6475947b9$var$agents","$d1e7adb6475947b9$var$target","options","showHelpers","mode","gui","GUI","autoPlace","background","initSeek","domElement","document","getElementById","appendChild","name","onChange","val","forEach","setup","canvas","createCanvas","parent","pixelDensity","colorMode","HSB","addEventListener","resizeDisplay","resizeCanvas","rectMode","CENTER","rect","pursuit","player","aiBot","attack","runner","mouseClicked","button","LEFT","clientX","clientY"],"version":3,"file":"basic-steering-behaviours.aa4967d8.js.map"}