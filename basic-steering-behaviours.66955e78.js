function e(e){return e&&e.__esModule?e.default:e}function t(e,t,i,s){Object.defineProperty(e,t,{get:i,set:s,enumerable:!0,configurable:!0})}var i=globalThis,s={},r={},a=i.parcelRequirebf15;null==a&&((a=function(e){if(e in s)return s[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return s[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},i.parcelRequirebf15=a);var o=a.register;o("hMArn",function(i,s){t(i.exports,"default",()=>n);var r=a("7Pz0b");let o=-1;var n=class{constructor(e,t){let i={pos:e.createVector(0,0),mass:1,velocity:e.createVector(0,0),acceleration:e.createVector(0,0),maxSpeed:15,maxForce:.25,wanderTheta:0,breakingThreshold:100,r:20,material:e.color("#00ffff"),perceptionRadius:30,repelRadius:20,visibilityAngle:Math.PI/3,wrapOnScreenEdge:!1,showHelpers:!1,...t};this.id=++o,this.p5=e,this.pos=i.pos,this.mass=i.mass,this.velocity=i.velocity,this.acceleration=i.acceleration,this.maxSpeed=i.maxSpeed,this.maxForce=i.maxForce,this.wanderTheta=i.wanderTheta,this.breakingThreshold=i.breakingThreshold,this.r=i.r,this.material=i.material,this.perceptionRadius=i.perceptionRadius,this.repelRadius=i.repelRadius,this.visibilityAngle=i.visibilityAngle,this.wrapOnScreenEdge=i.wrapOnScreenEdge,this.showHelpers=i.showHelpers,this.wanderTheta=0}setValues(e,t){if("number"==typeof t)switch(e){case"maxSpeed":this.maxSpeed=t;break;case"maxForce":this.maxForce=t;break;case"perceptionRadius":this.perceptionRadius=t;break;case"repelRadius":this.repelRadius=t;break;case"visibilityAngle":this.visibilityAngle=t;break;default:throw"Unsupported key passed to setValues()"}if("boolean"==typeof t){if("showHelpers"===e)this.showHelpers=t;else throw"Unsupported key passed to setValues()"}}draw(){return this.p5.push(),this.p5.translate(this.pos.x,this.pos.y),this.p5.rotate(this.velocity.heading()),this.showHelpers&&this.drawHelpers(),this.drawSprite(),this.p5.pop(),this}update(){return this.velocity.add(this.acceleration.limit(this.maxForce)),this.velocity.limit(this.maxSpeed),this.pos.add(this.velocity),this.wrapOnScreenEdge&&this.constraintWithinWindow(this.pos.x,this.pos.y),this.acceleration.set(0,0),this}applyForces(e){return e&&this.acceleration.add(e),this}drawSprite(){let e=this.r;return this.p5.stroke(this.material),this.p5.strokeWeight(1),this.p5.noFill(),this.p5.triangle(e,0,-e,e/2,-e,-e/2),this.p5.stroke(50),this}drawHelpers(){this.p5.noStroke(),this.p5.fill(255),this.p5.textSize(15),this.p5.text(this.id,0,0),this.p5.noFill(),this.velocity.mag()<this.maxSpeed?this.p5.stroke(0,80,50):this.p5.stroke(50),this.p5.strokeWeight(1),this.p5.circle(0,0,this.perceptionRadius),this.p5.fill(255,255,255,.3),this.p5.arc(0,0,this.perceptionRadius,this.perceptionRadius,-this.visibilityAngle,this.visibilityAngle);let e=this.p5.createVector(1,0).setMag(this.velocity.mag()).mult(20);return this.p5.line(0,0,e.x,e.y),this}seek(t,i=!1){if(!t)return this.p5.createVector();let s=e(r).Vector.sub(t,this.pos),a=this.maxSpeed;if(i){let e=s.mag();e<this.breakingThreshold&&(a=this.p5.map(e,0,this.breakingThreshold,0,this.maxSpeed))}return s.setMag(a),s.sub(this.velocity),s.limit(this.maxForce),s}flee(e){return null===e?null:this.seek(e).mult(-1)}pursue(e){let t=e.pos.copy(),i=e.velocity.copy();return i.mult(40),t.add(i),this.seek(t)}evade(e){let t=this.pursue(e);return t.mult(-1),t}arrive(e){return this.seek(e,!0)}wander(){let e=this.p5.PI/6,t=50*this.p5.cos(this.wanderTheta),i=50*this.p5.sin(this.wanderTheta),s=this.velocity.copy().setMag(100);return s.add(this.p5.createVector(t,i)),s.add(this.pos),this.constraintWithinWindow(this.pos.x,this.pos.y),this.wanderTheta+=this.p5.random(-e,e),this.seek(s)}pathFollow(e,t=!1){let i=this.velocity.copy().normalize().mult(50).add(this.pos);this.p5.strokeWeight(1),this.p5.stroke(255);let s=e.getClosestSegment(i.x,i.y,t);return s.length&&s.length>e.radius&&s.intersectionPosition?this.seek(s.intersectionPosition):this.velocity.copy()}groupBehaviour(t){let i=this.p5.createVector(),s=this.p5.createVector(),a=this.p5.createVector(),o=t.length;for(let n=0;n<o;n++){if(t[n]===this)continue;let h=this.velocity.copy().normalize().dot(t[n].velocity.copy().normalize()),p=e(r).Vector.dist(t[n].pos,this.pos);if(p>this.perceptionRadius||h>this.visibilityAngle)continue;i.add(t[n].velocity);let l=(this.perceptionRadius-p)/this.perceptionRadius;p>this.repelRadius&&s.add(t[n].pos);let c=this.pos.copy().sub(t[n].pos).div(l);a.add(c),this.p5.stroke(20),this.p5.strokeWeight(2),this.showHelpers&&this.p5.line(t[n].pos.x,t[n].pos.y,this.pos.x,this.pos.y),o-1>0&&(i.div(o-1).sub(this.velocity).setMag(this.maxSpeed),s.div(o-1).sub(this.pos).setMag(this.maxSpeed),a.div(o-1).sub(this.velocity).setMag(this.maxSpeed))}return{alignment:i,cohesion:s,separation:a}}constraintWithinWindow(e,t){let{innerWidth:i,innerHeight:s}=window;e<0&&(this.pos.x=i),e>i&&(this.pos.x=0),t<0&&(this.pos.y=s),t>s&&(this.pos.y=0)}}}),o("fK5g3",function(e,i){var s,r,a,o;t(e.exports,"defaultEntityConfig",()=>n),t(e.exports,"defaultEdgeConfig",()=>h),t(e.exports,"MOUSE_BTN",()=>s),t(e.exports,"Gamer",()=>r);let n={r:5},h={top:!0,right:!0,bottom:!0,left:!0};(a=s||(s={}))[a.LEFT=0]="LEFT",a[a.MIDDLE=1]="MIDDLE",a[a.RIGHT=2]="RIGHT",(o=r||(r={}))[o.PLAYER=0]="PLAYER",o[o.AI=1]="AI"});var n=a("e93rA"),h=a("7Pz0b"),p=a("hMArn"),l=a("fK5g3");let c=[],d=null;new(e(h))(e=>{let t={showHelpers:!1,maxSpeed:4,maxForce:.1,mode:"Wander"},i=new n.GUI({autoPlace:!1});function s(e){switch(e.background(200,60,10),d=e.createVector(window.innerWidth/2,window.innerHeight/2),t.mode){case"Seek":r(e);break;case"Flee":c=[],r(e),d=d||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Pursuit":c=[new p.default(e,{pos:e.createVector(window.innerWidth,window.innerHeight),maxSpeed:t.maxSpeed,maxForce:t.maxForce,showHelpers:t.showHelpers}),new p.default(e,{pos:e.createVector(200,300),maxSpeed:4,maxForce:.3,material:e.color("#0000ff"),showHelpers:t.showHelpers})],d=d||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Evade":c=[new p.default(e,{pos:e.createVector(300,300),maxSpeed:t.maxSpeed,maxForce:t.maxForce,showHelpers:t.showHelpers}),new p.default(e,{pos:e.createVector(400,300),maxSpeed:2,maxForce:.1,material:e.color("#0000ff"),showHelpers:t.showHelpers})],d=d||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Arrive":c=[new p.default(e,{pos:e.createVector(300,300),maxSpeed:t.maxSpeed,maxForce:t.maxForce,showHelpers:t.showHelpers})],d=d||e.createVector(window.innerWidth/2,window.innerHeight/2);break;case"Wander":c=[new p.default(e,{pos:e.createVector(window.innerWidth/2,window.innerHeight/2),maxSpeed:t.maxSpeed,maxForce:t.maxForce,showHelpers:t.showHelpers})],d=null}}function r(e){(c=[]).push(new p.default(e,{pos:e.createVector(200,300),maxSpeed:t.maxSpeed,maxForce:t.maxForce,showHelpers:t.showHelpers})),d=d||e.createVector(window.innerWidth/2,window.innerHeight/2)}i.domElement.id="gui",document.getElementById("gui")?.appendChild(i.domElement),i.add(t,"mode",["Seek","Flee","Pursuit","Evade","Arrive","Wander"]).name("Example Type").onChange(t=>{s(e)}),i.add(t,"showHelpers").onChange(e=>c.forEach((t,i)=>{t.setValues("showHelpers",e)})),i.add(t,"maxSpeed",.1,10,.1).onChange(e=>c.forEach((t,i)=>{0===i&&t.setValues("maxSpeed",e)})),i.add(t,"maxForce",.01,2,.01).onChange(e=>c.forEach((t,i)=>{0===i&&t.setValues("maxForce",e)})),e.setup=()=>{e.createCanvas(window.innerWidth,window.innerHeight).parent("app"),e.background("white"),e.pixelDensity(1),e.colorMode(e.HSB),window.addEventListener("resize",()=>(function(e){e.resizeCanvas(window.innerWidth,window.innerHeight)})(e)),s(e)},e.draw=()=>{var i;switch(e.background(200,60,10),(i=d)&&(e.push(),e.translate(i.x,i.y),e.noFill(),e.stroke(0,100,70),e.circle(0,0,5),e.rotate(e.PI/4),e.rectMode(e.CENTER),e.rect(0,0,10),e.pop()),t.mode){case"Seek":(function(){for(let e=0;e<c.length;e++){let t=c[e].seek(d);c[e].applyForces(t),c[e].update(),c[e].draw()}})();break;case"Flee":(function(){for(let e=0;e<c.length;e++){let t=c[e].flee(d);c[e].applyForces(t),c[e].update(),c[e].draw()}})();break;case"Pursuit":(function(){let e=c[0],t=c[1],i=t.seek(d);t.applyForces(i);let s=e.pursue(t);e.applyForces(s);for(let e=0;e<c.length;e++)c[e].update(),c[e].draw()})();break;case"Evade":(function(){let e=c[0],t=c[1],i=e.seek(d);e.applyForces(i);let s=t.evade(e);t.applyForces(s);for(let e=0;e<c.length;e++)c[e].update(),c[e].draw()})();break;case"Arrive":(function(){let e=c[0],t=e.arrive(d);e.applyForces(t);for(let e=0;e<c.length;e++)c[e].update(),c[e].draw()})();break;case"Wander":(function(){let e=c[0],t=e.wander();e.applyForces(t);for(let e=0;e<c.length;e++)c[e].update(),c[e].draw()})()}},e.mouseClicked=i=>{if(i.button!==l.MOUSE_BTN.LEFT)return!1;switch(t.mode){case"Seek":case"Flee":case"Pursuit":case"Evade":case"Arrive":d=e.createVector(i.clientX,i.clientY);break;case"Wander":d=null}return!1}});
//# sourceMappingURL=basic-steering-behaviours.66955e78.js.map
